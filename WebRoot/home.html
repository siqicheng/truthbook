<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>个人主页 | 趣事簿</title>

    <link href="./assets/semantic/css/semantic.css" rel="stylesheet">
    <link href="./assets/magnific-popup/magnific-popup.css" rel="stylesheet">
    <link href="./CSS/general.css" rel="stylesheet">
    <link href="./CSS/position.css" rel="stylesheet">
    <link href="./CSS/addpicBtn.css" rel="stylesheet">
    <link href="./CSS/uploadPic.css" rel="stylesheet">
    <link href="./CSS/topBar.css" rel="stylesheet">
    <link href="./CSS/menuBar.css" rel="stylesheet">
    <link href="./CSS/eventSegment.css" rel="stylesheet">
    <link href="./CSS/profileSegment.css" rel="stylesheet">
    <link href="./CSS/notification.css" rel="stylesheet">
    <link rel="shortcut icon" href="img/logo_red.ico"/>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <!-- Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-49027267-2', 'truthbook.cc');
    ga('send', 'pageview');
  </script>
</head>

<body id = "body">
  <div class='profile-wrapper'>
  <div class="ui fixed transparent main small menu" id="topbar"  style="height:37px">
    <div class="left  menu">

      <div class="ui dropdown item" id="upload_menu">
        <i class="add large icon"></i>传照片
        <div class=" dropdown menu" style="width: 170px;">
          <div class="item" id="upload_for_new_btn" style="text-align:center;width: 170px;">新建好友档案</div>

          <div class="ui dropdown item" id="upload_for_fri_btn" style="text-align:center;width: 170px;">
            为已有好友上传
            <div class="menu">
              <div class="ui dropdown item" style="width: 170px;">
                <div><i class="star small icon"></i>极·友<i class="dropdown icon"></i></div>
                <div class="list menu eFriendsList upload_for_fri">
                </div>
              </div>
              <div class="ui dropdown item" style="width: 170px;">
                <div><i class="half empty star small icon"></i>真·友<i class="dropdown icon"></i></div>
                <div class="list menu nFriendsList upload_for_fri">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <a class="item" id="close_sidebar_btn" style="display:none"><i class="remove large icon"></i>关闭</a>

    </div>
    <a class="active green item" onclick = "goHomePage();">
      <i class="home large icon" style="margin-bottom: 3px;"></i><span id = 'user_name_top'></span>
    </a>
    <a class="blue item" id="gotimelineBtn" onclick="goTimeLine();">
        <i class="grid layout large icon" style="margin-bottom: 3px;"></i><span> 新鲜事</span>
    </a>
<!--    <a class="orange item"> -->
<!--        <i class="setting large icon"></i> -->
<!--    </a> -->
    <div class="empty item"></div>
    <a class="open_popup_link item" id='popup' href="#upload" style="display:none">上传照片（PopUp）</a>
    <div class="title" onclick = "goHomePage();" style="display:inline;">
          <img src="img/Truthbook_red.png" width="140px" >
      </div>

    <div class="right menu" style="display:inline;">
        <form class="ui form item" autocomplete="off" onsubmit="return false" style="padding-top: 0px;padding-left: 0px;padding-bottom: 0px;">
            <div class="ui dropdown" id="searchbar">
              <div class="ui small input icon">
                  <input  tabindex="1" type="text" id = "searchInput" placeholder="Search..." >
                  <i class="search link icon"></i>
                </div>
<!--                <div class="ui fluid list menu"> -->
<!--                  <div class="item" tabindex="2"> -->

<!--                  </div> -->
<!--                  <div class="item" tabindex="3"> -->

<!--                  </div> -->
<!--                </div> -->
            </div>
          </form>
          <a class = "item" id="exitButton">
              <i class="off large icon"></i>
          </a>
    </div>

  </div>




  <div id="upload" class="white-popup  mfp-hide">
    <h3 class="ui header">上传照片</h3>

    <div class="ui three steps" >
      <div class="ui active step" id="step1" style="font-size: 10px;cursor: pointer;">选人</div>
      <div class="ui disabled step" id="step2" style="font-size: 10px;cursor: default">选图</div>
      <div class="ui disabled step" id="step3" style="font-size: 10px;cursor: default">完成</div>
      </div>

      <div class="ui divider"></div>

    <form class="ui form uploadForm" id="choosePeople">
      <div class="field" id="fullNameTest">
              <label>真实姓名</label>
                <div class="ui left labeled icon input">
                  <input type="text" id="fullName" placeholder="王大锤" name="fullName" >
                  <i class="user icon"></i>
                </div>
          </div>
      <div class="field" id="schoolTest">
        <label>学校全称</label>
                <div class="ui left labeled icon input">
                  <input type="text" id="school" placeholder="复旦大学/上海外国语大学" name="school" >
                    <i class="book icon"></i>
                </div>
          </div>
      <div class="field" id="entryTimeTest">
        <label>入学年份</label>
              	<div class="ui left labeled icon input">
            	<input type="text" id="entryTime" placeholder="2008/2012/..." name="entryTime" >
          			<i class="align justify icon"></i>
            	</div>
      </div>
      <div class="ui error message"></div>
      <div class="ui black fluid button" id="nextstep1" >下一步</div>
<!--      <div class="ui red button" id="resetbtn" onclick="resetUpload()">重置</div> -->
    </form>

      <div class="ui form uploadForm" id="choosePic" style="display:none">
        <div class="ui items">
          <div class="item" style="width:100%;margin-left: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;">
            <div id="imgPrev">
            </div>
            <div class="content">
              <textarea id="picDescription" class="description" style="height:100px; " placeholder="请输入图片描述（最多200字）"></textarea>
            </div>
            <div class="meta">
            </div>
          </div>
        </div>
        <div class="ui fluid two buttons">
          <div class="addpic button">
            <input type ="file" id="picInput"  multiple>选择图片
          </div>
          <div class="ui black button" id="submitBtn"  >确定上传</div>
        </div>
        <div class="ui successful progress" id="uploadProgress" style="display:none">
          <div class="bar"></div>
        </div>
      </div>

      <div class="ui form uploadForm" id="complete" style="display:none">
        <div class="ui success message">
<!--            <i class="ui small cloud upload icon"></i> -->
          <div class="content">
            <div class="header"></div>
            <p></p>
          </div>
        </div>
        <div class="ui fluid two buttons">
          <div class="ui white fluid button" onclick="gotoChoosePic()">继续为他传</div>
          <div class="ui black fluid button" onclick="resetUpload()">换个人上传</div>
        </div>
      </div>

      <div class="ui form uploadForm" id="rechoosePeople" style="display:none"> <!-- 重名选人 -->
        <div class="ui two column vertically divided grid">
          <div class="row">
          <div class="middle aligned column">
              <div>
                <img id='peoplePrev' class="ui medium image" src="img/profile_test/247144.jpg">
              </div>
            </div>
            </div>
          <div class="row">
          <div class="middle aligned column">
            <div class="ui attached message" id="rechooseMessage"></div>
            <div class="ui selection list" id="rechooselist"></div>
            <div class="ui red bottom attached message segment"  id="rechooseError" style="display:none">请选择要发给的对象</div>
          </div>
          </div>
        </div>
        <div class="ui divider"></div>
        <div class="ui fluid two buttons">
          <div class="ui red button" id="nextstep2_for_new_quote">以上都不是</div>
          <div class="ui black button" id="nextstep2" >下一步</div>
        </div>
      </div>
  </div>

  <div id="profile-segment">
    <div class="ui raised segment" style="height:190px;padding:0px;">
      <div class="ui column grid" style="margin-left: 0px;margin-right: 0px;">
          <div class="column" style='margin-top: 0px;margin-bottom: 0px;width: 210px;padding-left: 0px;padding-right: 0px;' >
            <div class="ui item" style="height:190px;border-radius: 5px;border-bottom-right-radius: 0px;border-top-right-radius: 0px;padding-left: 0px;width: 210px;background-color:#5A5F64;">
              <div class="ui icon header" id = "headicon" style='margin-top: 20px;'>
              <a class='image' id='portraitLarge' href="">
                <img class="rounded ui image icon" src="" id="portraitImage" style="width:110px; height: 110px;cursor:pointer;margin-bottom: 0px;margin-left: 50px;margin-right: 50px;">
              </a>
                <div class=" header" id = "user_name" style="font-size:20px;color:#EDEEEF;padding-top: 8px;padding-bottom: 6px;"></div>
                <div class="sub header userInfo" style="font-size:12px;color:#848284;"><i class="map marker icon" id='userSchoolIcon' style="font-size:14px;display:inline;"></i>
                  <span id = 'user_school' ></span>&ensp;
                  <span id = 'user_entryTime' ></span>
                </div>
              </div>
            </div>
            <div class="ui item" id='coverControlBtn' style="display:none;position:absolute; bottom:0;left:0;margin-bottom: 10px;margin-left: 220px;">
              <div class="ui buttons" align="center">
                  <button class="ui green vertical animated button transition hidden" id="addFriendButton"
                  style="margin-left: 5px;margin-right: 5px;border-radius: 4px;">
                      <div class="visible content">&ensp;<i class="add user basic icon"></i>&ensp;</div>
                      <div class="hidden content">做朋友</div>
                  </button>
                  <button class="ui disable fade animated button transition hidden" id="addFriendWaitingButton"
                  style="margin-left: 5px;margin-right: 5px;border-radius: 4px;">
                       <div class="visible content">&ensp;<i class="half empty heart icon"></i>&ensp;</div>
                       <div class="hidden content">等确认</div>
                    </button>
                  <button class="ui blue vertical animated button transition hidden" id="uploadPhoto"
                  style="margin-left: 5px;margin-right: 5px;border-radius: 4px;">
                       <div class="visible content">&ensp;<i class="cloud upload icon"></i>&ensp;</div>
                       <div class="hidden content">传照片</div>
                    </button>
                    <button class="ui black vertical animated button transition hidden" id="disabeFriendButton"
                    style="margin-left: 5px;margin-right: 5px;border-radius: 4px;">
                       <div class="visible content">&ensp;<i class="trash icon"></i>&ensp;</div>
                       <div class="hidden content">变路人</div>
                    </button>

<!--                    <button class="ui black vertical animated button transition hidden" id="disabeFriendButton" -->
<!--                    style="margin-left: 5px;margin-right: 5px;border-radius: 4px;">  -->
<!--                       <div class="visible content">&ensp;<i class="trash icon"></i>&ensp;</div> -->
<!--                       <div class="hidden content">变路人</div> -->
<!--                    </button> -->

<!--                <button class="ui teal vertical animated button transition hidden" id="newPhotoButton" -->
<!--                    style="margin-left: 5px;margin-right: 5px;border-radius: 4px;">  -->
<!--                      <div class="hidden content"><i class="briefcase icon"></i><span id="numOfUnapprovedImage"></span></div> -->
<!--                      <div class="visible content">待通过照片</div> -->
<!--                   </button> -->
<!--                   <button class="ui orange vertical animated button transition hidden" id="approvedPhotoButton" -->
<!--                    style="margin-left: 5px;margin-right: 5px;border-radius: 4px;">  -->
<!--                      <div class="visible content">&ensp;&ensp;<i class="home icon"></i>&ensp;&ensp;</div> -->
<!--                      <div class="hidden content">回到主页</div> -->
<!--                   </button> -->
              </div>
            </div>
          </div>
<!--          <div class="column"> -->
<!--            <div class="ui segment"> -->
<!--                <span id="testCookie"></span> -->
<!--            </div> -->
<!--          </div> -->
        <div class="column" style="padding-left: 0px;padding-right: 0px;margin-bottom: 0px;margin-top: 0px;">
          <div class="ui item" style="height:190px;border-radius: 5px;border-bottom-left-radius: 0px;border-top-left-radius: 0px;padding-left: 0px;width: 790px;background-color:#C4C2C4;">

          </div>
          </div>
      </div>


    </div>
  </div>

  <div class="ui basic segment" id="menubar" >
    <div class="ui four column grid" >
      <div class="column">
        <div class="ui red inverted fluid menu eFriends" >
          <div class="ui dropdown fluid item" >
            <i class="star small icon"></i> 极·友
            <div class="ui small label" id="eFriends_num">0</div>
            <div class="ui fluid list menu eFriendsList goto_fri_page" id="eFriendsList">
              </div>
            </div>
        </div>
      </div>
      <div class="column">
        <div class="ui red inverted fluid menu">
          <div class="ui dropdown fluid item">
            <i class="half empty star small icon"></i> 真·友
            <div class="ui small label" id="nFriends_num" style="float:right">0</div>
            <div class="ui fluid list menu nFriendsList goto_fri_page" id="nFriendsList">

              </div>
            </div>
        </div>
      </div>
      <div class="column">
        <div class="ui red inverted fluid menu">
          <div class="ui dropdown fluid item">
            <i class="photo small icon"></i>照片
            <div class="ui small label" id="photos_num" style="float:right">0</div>
            <div class="menu">
<!--                  <a class="item">张三</a> -->
<!--                  <a class="item">李四</a> -->
<!--                  <a class="item">王五</a> -->
              </div>
            </div>
        </div>
      </div>
      <div class="column" id="notificolumn">
        <div class="ui red inverted fluid menu">
          <div class="ui dropdown fluid item" id="notifiBtn">
            <i class="mail small icon"></i> 消息通知
            <div class="floating ui circular green label transition hidden" id="unreadMessageNum" style="display:none;">00</div>
            <div class="ui divided list vertical menu message" >
              <div id="upgrade_MessageMenu" style="-webkit-box-shadow: 0 2px 1px 0 rgba(0, 0, 0, 0.1),0 1px 0 0 rgba(0, 0, 0, 0.1);"></div>
              <div id="reply_MessageMenu" style="-webkit-box-shadow: 0 2px 1px 0 rgba(0, 0, 0, 0.1),0 1px 0 0 rgba(0, 0, 0, 0.1);"></div>
              <div id="rejectImage_MessageMenu" style="-webkit-box-shadow: 0 2px 1px 0 rgba(0, 0, 0, 0.1),0 1px 0 0 rgba(0, 0, 0, 0.1);"></div>
              <div id="acceptImage_MessageMenu" style="-webkit-box-shadow: 0 2px 1px 0 rgba(0, 0, 0, 0.1),0 1px 0 0 rgba(0, 0, 0, 0.1);"></div>
              <div id="inviteToUpload_MessageMenu" style="-webkit-box-shadow: 0 2px 1px 0 rgba(0, 0, 0, 0.1),0 1px 0 0 rgba(0, 0, 0, 0.1);"></div>
              <div id="friendRequest_MessageMenu"  style="-webkit-box-shadow: 0 2px 1px 0 rgba(0, 0, 0, 0.1),0 1px 0 0 rgba(0, 0, 0, 0.1);"></div>
              <div id="acceptFriendRequest_MessageMenu"  style="-webkit-box-shadow: 0 2px 1px 0 rgba(0, 0, 0, 0.1),0 1px 0 0 rgba(0, 0, 0, 0.1);"></div>
              <div id="takeQuote_MessageMenu"  style="-webkit-box-shadow: 0 2px 1px 0 rgba(0, 0, 0, 0.1),0 1px 0 0 rgba(0, 0, 0, 0.1);"></div>

              </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="ui raised segment " id='newPhotoBar' style="display:none;cursor:pointer;">
    <p>有<span id="numOfUnapprovedImage"></span>张新照片等待审核</p>
  </div>
  <div class="ui raised segment " id='newPhotoReturnBar' style="display:none;cursor:pointer;">
    关闭
  </div>
  <div class="" id="neweventwrap">
    <div class="ui small center aligned header" style="padding-top:10px;">待审核区
    </div>
    <div class="" id="neweventsegment" >

    </div>
  </div>

  <div class="" id="eventsegment"></div>

  <div class="itemloadBtn" id = "showMoreButton"><div class="ui basic fluid icon button"><i class="double angle down large icon"></i></div></div>


  </div>

  <div class="ui dimmer page hidden">
    <div class="ui basic modal logout transition hidden" style="margin-top: -159px;">
        <div class="header">退出 Truthbook</div>
        <div class="content">
          <div class="left"><i class="home icon"></i></div>
            <div class="right"><p>确定一定以及肯定要下线并且   <b>注销登录</b>   了吗?</p></div>
        </div>
        <div class="actions">
            <div class="two fluid ui buttons">
              <div class="ui negative fade animated left labeled icon button ">
                  <i class="remove icon"></i>
                  <div class="visible content">取消</div>
                  <div class="hidden content">对不起，是我点错了</div>
              </div>
              <div class="ui positive fade animated right labeled icon button">
                <div class="visible content">退出</div>
                  <div class="hidden content">谁都别拦着我</div>
                  <i class="checkmark icon"></i>
              </div>
            </div>
        </div>
      </div>

    <div class="ui basic modal deleteFriend transition hidden" id="testModal" style="margin-top: -159px;">
        <div class="header" id="modalHeader"></div>
        <div class="content">
          <div class="left"style="width: 40%"><i class="home icon" id = "modalLogo"></i></div>
        <div class="right"><p id="modalContent"></p></div>
        </div>
        <div class="actions">
          <div class="ui two fluid buttons">
          <div class="ui negative vertical animated left labeled icon button">
                  <i class="remove icon"></i>
                  <div class="visible content" id="modalNegativeBtn">取消</div>
                  <div class="hidden content" id="modalNegativeBtnHidden"></div>
          </div>
<!--          <div class="or"></div> -->
          <div class="ui positive vertical animated right labeled icon button">
                <div class="visible content" id="modalPositiveBtn">确定</div>
                  <div class="hidden content" id="modalPositiveBtnHidden"></div>
              <i class="checkmark icon"></i>
          </div>
        </div>
        </div>
      </div>
  </div>

    <div class="ui item dimmable">
    <div class="ui page dimmer message hidden">
        <div class="content">
            <div class="center">
                <h1 class="ui inverted icon header">
                    <i class="icon circular inverted emphasized green checked checkbox"></i>
                    朕知道了
                    <div class="sub header"  id="alertMessage"></div>
                </h1>
            </div>
        </div>
    </div>

    <div class="ui page dimmer dummyDimmerForExtention hidden">
        <div class="content">
            <div class="center">
                <h1 class="ui inverted icon header">
                    <i class="icon circular inverted emphasized green checked checkbox"></i>
                    朕知道了
                    <div class="sub header" id="dummyDimmerForExtention"></div>
                </h1>
            </div>
        </div>
    </div>
  </div>

  <iframe frameborder=0 marginwidth=0 marginheight=0 scrolling=no width=100% src="./footer.html"></iframe>

  <script src="./assets/jquery/jquery-1.7.2.js"></script>
  <script src="./assets/jquery/jquery.cookie.js"></script>
  <script src="./assets/jquery/jquery.animate-colors-min.js"></script>

  <script src="./assets/semantic/javascript/semantic.js"></script>
  <script src="./assets/masonry.pkgd.min.js"></script>
  <script src="./assets/imagesloaded.pkgd.min.js"></script>
  <script src="./assets/magnific-popup/magnific-popup.js"></script>
  <script src="./js/general/globalValue.js"></script>
  <script src="./js/general/language_zh_cn.js"></script>
  <script src="./js/general/utility.js"></script>

  <script src="js/load-image/load-image.min.js"></script>
  <script src="js/load-image/load-image-orientation.js"></script>
  <script src="js/load-image/load-image-exif.js"></script>

  <script src="./assets/jquery/jquery.iframe-transport.js"></script>
  <script src="./assets/jquery/jquery.ui.widget.js"></script>
  <script src="./assets/jquery/jquery.fileupload.js"></script>
<!--  <script src="./assets/jquery/jquery.fileupload-image.js"></script> -->

  <script src="./js/profilePage/getPageOwner.js"></script>
  <script src="./js/profilePage/uploadPic.js"></script>
  <script src="./js/profilePage/refreshFriendsLists.js"></script>
<!--  <script src="./js/uploadpopup.js"></script> -->
<!--  <script src="./js/sidebar_toggle.js"></script> -->


  <script src="./js/profilePage/dimmer_modal_popup_Handler.js"></script>
  <script src="./js/friendRelationButtonHandler.js"></script>
  <script src="./js/userAndPageInfo.js"></script>
  <script src="./js/general/searchBar.js"></script>
  <script src="./js/message/messageBarButtonClick.js"></script>
  <script src="./js/message/messageBarController.js"></script>
  <script src="./js/message/messageListener.js"></script>
  <script src="./js/profilePage/portraitHandler.js"></script>
  <script src="./js/profilePage/showMoreButton.js"></script>
  <script src="./js/profilePage/imageLayout.js"></script>
  <script src="./js/profilePage/imageLayoutUtil.js"></script>
  <script src="./js/profilePage/imageButtonController.js"></script>
  <script src="./js/profilePage/imageButtonFunction.js"></script>
  <script src="./js/profilePage/acceptNewImage.js"></script>
  <script src="./js/imageComment/commentLayout.js"></script>
  <script src="./js/notification.js"></script>

  <script type="text/javascript">
  $(function() {
    setInitialPortrait();
    handleLogoutPopUp();
    userInfo();
    addFriendButtonCheck();

  $("#profile-segment").hover(
    function(){
      $("#user_name").animate({color:"#FFFFFE"},400);

      $("#userSchoolIcon").animate({color:"#FFFFFF"},400);
      $("#user_school").animate({color:"#EDEEEF"},400);
      $("#user_entryTime").animate({color:"#EDEEEF"},400);

    },
    function(){
      $("#user_name").animate({color:"#EDEEEF"},400);

      $("#userSchoolIcon").animate({color:"#848284"},400);
      $("#user_school").animate({color:"#848284"},400);
      $("#user_entryTime").animate({color:"#848284"},400);
    }
  );

//    var int=self.setInterval("startrequest()",1000);
  });


  function startrequest() {
    var daytime = new Date();
    $("#date").html(daytime.toString());
  }



  </script>

  <script type="text/javascript">
  $(document).ready(function() {
      //semantic dropdown intialization
    $('.ui.dropdown')
        .dropdown(
          {on: 'click'
          }
        );
    $('.ui.accordion')
      .accordion()
    ;
  });

  </script>

  <script>
  $(function(){
    $(".open_popup_link").magnificPopup({
      type:"inline",
      midClick: true,
      closeOnBgClick: false,
      callbacks: {
        afterClose: function() {
          resetUpload();
//          selected_num=-1;
        }
      }
    });
//    $(".open_popup_link").trigger('click');
  });

  </script>

  <script>
  $(function() {
    $("#upload_for_fri_btn").dropdown( {
      on: "hover"
    });
  });


  </script>

</body>
</html>
